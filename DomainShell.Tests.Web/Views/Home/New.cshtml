
@{
    ViewBag.Title = "New";
    string scriptId = Guid.NewGuid().ToString();
    string createFormId = Guid.NewGuid().ToString();
}

@section scripts{
    <script id="@scriptId" type="text/javascript">
        var personDetailModel = {
            el: $("#@createFormId"),        
            name: function () {
                return $(this.el).find("[name=name]").val();
            },
            create: function () {
                var createCommand = { name: this.name() };

                $.ajax({
                    url: "/home/create",
                    method: "post",
                    data: createCommand,
                }).done(function (data) { //ajaxの通信に成功した場合
                    if (data) {
                        location.href = "/home";
                    } else {
                        alert("error!");
                    }

                }).fail(function (data) { //ajaxの通信に失敗した場合
                    alert("error!");
                });
            }
        };
    </script>
}

<h2>New</h2>

<div class="row">
    <div class="col-md-12">
        <form id="@createFormId">            
            <label>name</label> <input type="text" name="name" value="" />
            <br />
            <br />
            <button type="button" onclick="personDetailModel.create()">create</button>
        </form>
    </div>
</div>